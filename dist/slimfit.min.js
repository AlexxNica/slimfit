!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.slimfit=t.slimfit||{})}(this,function(t){"use strict";function e(t){var e="undefined"==typeof t?"undefined":d(t);return null!=t&&("object"==e||"function"==e)}function i(t){var i=e(t)?E.call(t):"";return i==w||i==b||i==m}function n(t){return null!=t&&"object"==("undefined"==typeof t?"undefined":d(t))}function r(t){return"symbol"==("undefined"==typeof t?"undefined":d(t))||n(t)&&W.call(t)==x}function o(t){if("number"==typeof t)return t;if(r(t))return I;if(e(t)){var i="function"==typeof t.valueOf?t.valueOf():t;t=e(i)?i+"":i}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(D,"");var n=M.test(t);return n||C.test(t)?F(t.slice(2),n?2:8):A.test(t)?I:+t}function h(t,i,n){function r(e){var i=v,n=p;return v=p=void 0,m=e,y=t.apply(n,i)}function h(t){return m=t,w=setTimeout(a,i),O?r(t):y}function u(t){var e=t-b,n=t-m,r=i-e;return E?N(r,g-n):r}function s(t){var e=t-b,n=t-m;return void 0===b||e>=i||e<0||E&&n>=g}function a(){var t=_();return s(t)?f(t):void(w=setTimeout(a,u(t)))}function f(t){return w=void 0,T&&v?r(t):(v=p=void 0,y)}function c(){void 0!==w&&clearTimeout(w),m=0,v=b=p=w=void 0}function l(){return void 0===w?y:f(_())}function d(){var t=_(),e=s(t);if(v=arguments,p=this,b=t,e){if(void 0===w)return h(b);if(E)return w=setTimeout(a,i),r(b)}return void 0===w&&(w=setTimeout(a,i)),y}var v,p,g,y,w,b,m=0,O=!1,E=!1,T=!0;if("function"!=typeof t)throw new TypeError(S);return i=o(i)||0,e(n)&&(O=!!n.leading,E="maxWait"in n,g=E?L(o(n.maxWait)||0,i):g,T="trailing"in n?!!n.trailing:T),d.cancel=c,d.flush=l,d}function u(t,i,n){var r=!0,o=!0;if("function"!=typeof t)throw new TypeError(Y);return e(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),h(t,i,{leading:r,maxWait:i,trailing:o})}function s(t){throw new Error("Missing parameter "+t)}function a(t){return null!==t&&void 0!==t}function f(t){return null===t||void 0===t}function c(t){return!(!t||1!==t.nodeType)}function l(t){if(f(t))return function(t,e){return Math.min(t,e)};var e=(""+t).trim().toLowerCase();if(e.indexOf("%")>-1){var i=function(){var t=+e.replace("%","")/100;return{v:function(e,i){return i*t}}}();if("object"===("undefined"==typeof i?"undefined":d(i)))return i.v}return function(){return+e.replace("px","")}}var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},v=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},p=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),g=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},y=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},w="[object Function]",b="[object GeneratorFunction]",m="[object Proxy]",O=Object.prototype,E=O.toString,T="object"==("undefined"==typeof global?"undefined":d(global))&&global&&global.Object===Object&&global,j="object"==("undefined"==typeof self?"undefined":d(self))&&self&&self.Object===Object&&self,k=T||j||Function("return this")(),_=function(){return k.Date.now()},x="[object Symbol]",P=Object.prototype,W=P.toString,I=NaN,D=/^\s+|\s+$/g,A=/^[-+]0x[0-9a-f]+$/i,M=/^0b[01]+$/i,C=/^0o[0-7]+$/i,F=parseInt,S="Expected a function",L=Math.max,N=Math.min,Y="Expected a function",G=function(){function t(){v(this,t);for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];if(1===n.length){var o=n[0],h=i(o)?o():o;if(h instanceof t)this.width=h.width,this.height=h.height;else if(c(h))this.width=h.clientWidth,this.height=h.clientHeight;else if(Array.isArray(h))this.width=h[0],this.height=h[1];else{if(!(a(h)&&a(h.width)&&a(h.height))){var u=new Error("Unsupported input. Must be either\n  DOMNode, Array or Object with field width and height,\n  or a function that returns any of the above.");throw u.value=o,u}this.width=h.width,this.height=h.height}}else{var s=n[0],f=n[1];this.width=s,this.height=f}}return p(t,[{key:"isEqual",value:function(e){if(e instanceof t)return this.width===e.width&&this.height===e.height;var i=new t(e);return this.width===i.width&&this.height===i.height}},{key:"toArray",value:function(){return[this.width,this.height]}},{key:"toObject",value:function(){return{width:this.width,height:this.height}}}]),t}(),R=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];v(this,t);var i=e.mode,n=void 0===i?t.MODE_BASIC:i,r=e.width,o=void 0===r?"100%":r,h=e.height,u=void 0===h?null:h,s=e.ratio,a=void 0===s?1:s,f=e.maxWidth,c=void 0===f?null:f,d=e.maxHeight,p=void 0===d?null:d;n===t.MODE_ASPECT_RATIO?(this.wFn=l(c),this.hFn=l(p),this.options={mode:n,ratio:a,maxWidth:c,maxHeight:p}):(this.wFn=l(o),this.hFn=l(u),this.options={mode:n,width:o,height:u})}return p(t,[{key:"fit",value:function(){var e=arguments.length<=0||void 0===arguments[0]?s("box"):arguments[0],i=arguments.length<=1||void 0===arguments[1]?s("container"):arguments[1],n=new G(e),r=n.width,o=n.height,h=new G(i),u=h.width,a=h.height,f=void 0;if(this.options.mode===t.MODE_ASPECT_RATIO){var c=this.options.ratio,l=this.wFn(u,u),d=this.hFn(a,a),v=Math.floor(c*d);f=v<=l?new G(v,d):new G(l,Math.floor(l/c))}else f=new G(this.wFn(r,u),this.hFn(o,a));return{dimension:f,changed:!f.isEqual(n)}}}]),t}();R.MODE_BASIC="basic",R.MODE_ASPECT_RATIO="aspectRatio";var $=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],i=e.type,n=void 0===i?t.TYPE_WINDOW:i,r=e.target,o=void 0===r?null:r,h=e.interval,a=void 0===h?500:h;v(this,t),n!==t.TYPE_POLLING||o||s("options.target"),this.type=n,this.target=o,this.interval=a,this.check=this.check.bind(this),this.throttledCheck=u(this.check,this.interval),this.isWatching=!1,this.listeners={change:[]}}return p(t,[{key:"hasTargetChanged",value:function(){if(!this.target)return!0;var t=new G(this.target);return(!this.currentDim||!t.isEqual(this.currentDim))&&(this.currentDim=t,!0)}},{key:"check",value:function(){return this.hasTargetChanged()&&this.dispatch("change",this.currentDim),this}},{key:"dispatch",value:function(t){for(var e=this,i=arguments.length,n=Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return this.listeners[t].forEach(function(t){return t.apply(e,n)}),this}},{key:"on",value:function(t,e){return this.listeners[t].indexOf(e)===-1&&this.listeners[t].push(e),this}},{key:"off",value:function(t,e){return this.listeners[t]=this.listeners[t].filter(function(t){return t!==e}),this}},{key:"start",value:function(){return this.isWatching||(this.target&&(this.currentDim=new G(this.target)),this.type===t.TYPE_WINDOW?window.addEventListener("resize",this.throttledCheck):this.type===t.TYPE_POLLING&&(this.intervalId=window.setInterval(this.check,this.interval)),this.isWatching=!0),this}},{key:"stop",value:function(){return this.isWatching&&(this.type===t.TYPE_WINDOW?window.removeEventListener("resize",this.throttledCheck):this.type===t.TYPE_POLLING&&this.intervalId&&(window.clearInterval(this.intervalId),this.intervalId=null),this.isWatching=!1),this}},{key:"destroy",value:function(){return this.stop(),this.listeners.change=[],this}}]),t}();$.TYPE_WINDOW="window",$.TYPE_POLLING="polling";var q=function(t){function e(){var t=arguments.length<=0||void 0===arguments[0]?s("box"):arguments[0],i=arguments.length<=1||void 0===arguments[1]?s("container"):arguments[1],n=arguments[2],r=arguments[3];v(this,e);var o=y(this,Object.getPrototypeOf(e).call(this,r)),h=new R(n);return o.fit=function(){return h.fit(t,i)},o}return g(e,t),p(e,[{key:"check",value:function(){if(this.hasTargetChanged()){var t=this.fit(),e=t.changed,i=t.dimension;e&&this.dispatch("change",i)}return this}}]),e}($);t.Dimension=G,t.Fitter=R,t.Watcher=$,t.FitWatcher=q,Object.defineProperty(t,"__esModule",{value:!0})});

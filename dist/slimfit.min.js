!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.slimfit=t.slimfit||{})}(this,function(t){"use strict";function e(t){var e="undefined"==typeof t?"undefined":d(t);return null!=t&&("object"==e||"function"==e)}function n(t){var n=e(t)?E.call(t):"";return n==y||n==w||n==b}function i(t){return null!=t&&"object"==("undefined"==typeof t?"undefined":d(t))}function r(t){return"symbol"==("undefined"==typeof t?"undefined":d(t))||i(t)&&W.call(t)==_}function o(t){if("number"==typeof t)return t;if(r(t))return I;if(e(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=e(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(T,"");var i=C.test(t);return i||F.test(t)?P(t.slice(2),i?2:8):A.test(t)?I:+t}function u(t,n,i){function r(e){var n=g,i=v;return g=v=void 0,b=e,p=t.apply(i,n)}function u(t){return b=t,y=setTimeout(a,n),O?r(t):p}function h(t){var e=t-w,i=t-b,r=n-e;return E?N(r,m-i):r}function s(t){var e=t-w,i=t-b;return void 0===w||e>=n||0>e||E&&i>=m}function a(){var t=M();return s(t)?f(t):void(y=setTimeout(a,h(t)))}function f(t){return y=void 0,j&&g?r(t):(g=v=void 0,p)}function c(){void 0!==y&&clearTimeout(y),b=0,g=w=v=y=void 0}function l(){return void 0===y?p:f(M())}function d(){var t=M(),e=s(t);if(g=arguments,v=this,w=t,e){if(void 0===y)return u(w);if(E)return y=setTimeout(a,n),r(w)}return void 0===y&&(y=setTimeout(a,n)),p}var g,v,m,p,y,w,b=0,O=!1,E=!1,j=!0;if("function"!=typeof t)throw new TypeError(S);return n=o(n)||0,e(i)&&(O=!!i.leading,E="maxWait"in i,m=E?L(o(i.maxWait)||0,n):m,j="trailing"in i?!!i.trailing:j),d.cancel=c,d.flush=l,d}function h(t,n,i){var r=!0,o=!0;if("function"!=typeof t)throw new TypeError(G);return e(i)&&(r="leading"in i?!!i.leading:r,o="trailing"in i?!!i.trailing:o),u(t,n,{leading:r,maxWait:n,trailing:o})}function s(t){throw new Error("Missing parameter "+t)}function a(t){return null!==t&&void 0!==t}function f(t){return null===t||void 0===t}function c(t){return!(!t||1!==t.nodeType)}function l(t){if(f(t))return function(t,e){return Math.min(t,e)};var e=(""+t).trim().toLowerCase();if(e.indexOf("%")>-1){var n=function(){var t=+e.replace("%","")/100;return{v:function(e,n){return n*t}}}();if("object"===("undefined"==typeof n?"undefined":d(n)))return n.v}return function(){return+e.replace("px","")}}var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},g=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},v=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),m=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},p=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},y="[object Function]",w="[object GeneratorFunction]",b="[object Proxy]",O=Object.prototype,E=O.toString,j="object"==("undefined"==typeof global?"undefined":d(global))&&global&&global.Object===Object&&global,D="object"==("undefined"==typeof self?"undefined":d(self))&&self&&self.Object===Object&&self,k=j||D||Function("return this")(),M=function(){return k.Date.now()},_="[object Symbol]",x=Object.prototype,W=x.toString,I=0/0,T=/^\s+|\s+$/g,A=/^[-+]0x[0-9a-f]+$/i,C=/^0b[01]+$/i,F=/^0o[0-7]+$/i,P=parseInt,S="Expected a function",L=Math.max,N=Math.min,G="Expected a function",R=function(){function t(){g(this,t);for(var e=arguments.length,i=Array(e),r=0;e>r;r++)i[r]=arguments[r];if(1===i.length){var o=i[0],u=n(o)?o():o;if(u instanceof t)this.width=u.width,this.height=u.height;else if(c(u))this.width=u.clientWidth,this.height=u.clientHeight;else if(Array.isArray(u))this.width=u[0],this.height=u[1];else{if(!(a(u)&&a(u.width)&&a(u.height))){var h=new Error("Unsupported input. Must be either\n  DOMNode, Array or Object with field width and height,\n  or a function that returns any of the above.");throw h.value=o,h}this.width=u.width,this.height=u.height}}else{var s=i[0],f=i[1];this.width=s,this.height=f}}return v(t,[{key:"isEqual",value:function(e){if(e instanceof t)return this.width===e.width&&this.height===e.height;var n=new t(e);return this.width===n.width&&this.height===n.height}},{key:"toArray",value:function(){return[this.width,this.height]}},{key:"toObject",value:function(){return{width:this.width,height:this.height}}}]),t}(),$=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];g(this,t);var n=e||{},i=n.mode,r=void 0===i?t.MODE_BASIC:i,o=n.width,u=void 0===o?"100%":o,h=n.height,s=void 0===h?null:h,a=n.ratio,f=void 0===a?1:a,c=n.maxWidth,d=void 0===c?null:c,v=n.maxHeight,m=void 0===v?null:v;r===t.MODE_ASPECT_RATIO?(this.wFn=l(d),this.hFn=l(m),this.options={mode:r,ratio:f,maxWidth:d,maxHeight:m}):(this.wFn=l(u),this.hFn=l(s),this.options={mode:r,width:u,height:s})}return v(t,[{key:"fit",value:function(){var e=arguments.length<=0||void 0===arguments[0]?s("box"):arguments[0],n=arguments.length<=1||void 0===arguments[1]?s("container"):arguments[1],i=new R(e),r=i.width,o=i.height,u=new R(n),h=u.width,a=u.height,f=void 0;if(this.options.mode===t.MODE_ASPECT_RATIO){var c=this.options.ratio,l=this.wFn(h,h),d=this.hFn(a,a),g=Math.floor(c*d);f=l>=g?new R(g,d):new R(l,Math.floor(l/c))}else f=new R(this.wFn(r,h),this.hFn(o,a));return{dimension:f,changed:!f.isEqual(i)}}}]),t}();$.MODE_BASIC="basic",$.MODE_ASPECT_RATIO="aspectRatio";var q=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];g(this,t);var n=e||{},i=n.mode,r=void 0===i?t.MODE_WINDOW:i,o=n.target,u=void 0===o?null:o,a=n.interval,f=void 0===a?500:a;r!==t.MODE_POLLING||u||s("options.target"),this.mode=r,this.target=u,this.interval=f,this.check=this.check.bind(this),this.throttledCheck=h(this.check,this.interval),this.isWatching=!1,this.listeners={change:[]}}return v(t,[{key:"hasTargetChanged",value:function(){if(!this.target)return!0;var t=new R(this.target);return this.currentDim&&t.isEqual(this.currentDim)?!1:(this.currentDim=t,!0)}},{key:"check",value:function(){return this.hasTargetChanged()&&this.dispatch("change",this.currentDim),this}},{key:"dispatch",value:function(t){for(var e=this,n=arguments.length,i=Array(n>1?n-1:0),r=1;n>r;r++)i[r-1]=arguments[r];return this.listeners[t].forEach(function(t){return t.apply(e,i)}),this}},{key:"on",value:function(t,e){return-1===this.listeners[t].indexOf(e)&&this.listeners[t].push(e),this}},{key:"off",value:function(t,e){return this.listeners[t]=this.listeners[t].filter(function(t){return t!==e}),this}},{key:"start",value:function(){return this.isWatching||(this.target&&(this.currentDim=new R(this.target)),this.mode===t.MODE_WINDOW?window.addEventListener("resize",this.throttledCheck):this.mode===t.MODE_POLLING&&(this.intervalId=window.setInterval(this.check,this.interval)),this.isWatching=!0),this}},{key:"stop",value:function(){return this.isWatching&&(this.mode===t.MODE_WINDOW?window.removeEventListener("resize",this.throttledCheck):this.mode===t.MODE_POLLING&&this.intervalId&&(window.clearInterval(this.intervalId),this.intervalId=null),this.isWatching=!1),this}},{key:"destroy",value:function(){return this.stop(),this.listeners.change=[],this}}]),t}();q.MODE_WINDOW="window",q.MODE_POLLING="polling";var H=function(t){function e(){var t=arguments.length<=0||void 0===arguments[0]?s("box"):arguments[0],n=arguments.length<=1||void 0===arguments[1]?s("container"):arguments[1],i=arguments[2],r=arguments[3];g(this,e);var o=p(this,Object.getPrototypeOf(e).call(this,r)),u=new $(i);return o.fit=function(){return u.fit(t,n)},o}return m(e,t),v(e,[{key:"check",value:function(){if(this.hasTargetChanged()){var t=this.fit(),e=t.changed,n=t.dimension;e&&this.dispatch("change",n)}return this}}]),e}(q);t.Dimension=R,t.Fitter=$,t.Watcher=q,t.FitWatcher=H,Object.defineProperty(t,"__esModule",{value:!0})});
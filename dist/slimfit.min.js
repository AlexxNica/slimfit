!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.slimfit=e():t.slimfit=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(1);Object.defineProperty(e,"Dimension",{enumerable:!0,get:function(){return i(r)["default"]}});var o=n(3);Object.defineProperty(e,"Fitter",{enumerable:!0,get:function(){return i(o)["default"]}});var u=n(4);Object.defineProperty(e,"Watcher",{enumerable:!0,get:function(){return i(u)["default"]}});var a=n(15);Object.defineProperty(e,"FitWatcher",{enumerable:!0,get:function(){return i(a)["default"]}})},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(2),u=function(){function t(){i(this,t);for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];if(1===n.length){var u=n[0],a=(0,o.isFunction)(u)?u():u;if(a instanceof t)this.width=a.width,this.height=a.height;else if((0,o.isElement)(a))this.width=a.clientWidth,this.height=a.clientHeight;else if(Array.isArray(a))this.width=a[0],this.height=a[1];else{if(!((0,o.isDefined)(a)&&(0,o.isDefined)(a.width)&&(0,o.isDefined)(a.height))){var f=new Error("Unsupported input. Must be either\n  DOMNode, Array or Object with field width and height,\n  or a function that returns any of the above.");throw f.value=u,f}this.width=a.width,this.height=a.height}}else{var c=n[0],s=n[1];this.width=c,this.height=s}}return r(t,[{key:"isEqual",value:function(e){if(e instanceof t)return this.width===e.width&&this.height===e.height;var n=new t(e);return this.width===n.width&&this.height===n.height}},{key:"toArray",value:function(){return[this.width,this.height]}},{key:"toObject",value:function(){return{width:this.width,height:this.height}}}]),t}();e["default"]=u},function(t,e){"use strict";function n(t){throw new Error("Missing parameter "+t)}function i(t){return null!==t&&void 0!==t}function r(t){return null===t||void 0===t}function o(t){return!(!t||1!==t.nodeType)}function u(t){if(r(t))return function(t,e){return Math.min(t,e)};var e=(""+t).trim().toLowerCase();if(e.indexOf("%")>-1){var n=function(){var t=+e.replace("%","")/100;return{v:function(e,n){return n*t}}}();if("object"===("undefined"==typeof n?"undefined":a(n)))return n.v}return function(){return+e.replace("px","")}}Object.defineProperty(e,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};e.isRequired=n,e.isDefined=i,e.isNotDefined=r,e.isElement=o,e.parseModifier=u;e.isFunction=function(){return"function"!=typeof/./&&"object"!==("undefined"==typeof Int8Array?"undefined":a(Int8Array))?function(t){return"function"==typeof t||!1}:function(t){var e={};return t&&"[object Function]"===e.toString.call(t)}}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(1),a=i(u),f=n(2),c=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];r(this,t);var n=e.mode,i=void 0===n?t.MODE_BASIC:n,o=e.width,u=void 0===o?"100%":o,a=e.height,c=void 0===a?null:a,s=e.ratio,h=void 0===s?1:s,l=e.maxWidth,d=void 0===l?null:l,p=e.maxHeight,v=void 0===p?null:p;i===t.MODE_ASPECT_RATIO?(this.wFn=(0,f.parseModifier)(d),this.hFn=(0,f.parseModifier)(v),this.options={mode:i,ratio:h,maxWidth:d,maxHeight:v}):(this.wFn=(0,f.parseModifier)(u),this.hFn=(0,f.parseModifier)(c),this.options={mode:i,width:u,height:c})}return o(t,[{key:"fit",value:function(){var e=arguments.length<=0||void 0===arguments[0]?(0,f.isRequired)("box"):arguments[0],n=arguments.length<=1||void 0===arguments[1]?(0,f.isRequired)("container"):arguments[1],i=new a["default"](e),r=i.width,o=i.height,u=new a["default"](n),c=u.width,s=u.height,h=void 0;if(this.options.mode===t.MODE_ASPECT_RATIO){var l=this.options.ratio,d=this.wFn(c,c),p=this.hFn(s,s),v=Math.floor(l*p);h=v<=d?new a["default"](v,p):new a["default"](d,Math.floor(d/l))}else h=new a["default"](this.wFn(r,c),this.hFn(o,s));return{dimension:h,changed:!h.isEqual(i)}}}]),t}();c.MODE_BASIC="basic",c.MODE_ASPECT_RATIO="aspectRatio",e["default"]=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(1),a=i(u),f=n(5),c=n(2),s=n(6),h=i(s),l=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=e.type,i=void 0===n?t.TYPE_WINDOW:n,o=e.target,u=void 0===o?null:o,a=e.interval,s=void 0===a?500:a;r(this,t),i!==t.TYPE_POLLING||u||(0,c.isRequired)("options.target"),this.type=i,this.target=u,this.interval=s,this.dispatcher=(0,f.dispatch)("change"),this.check=this.check.bind(this),this.throttledCheck=(0,h["default"])(this.check,this.interval),this.isWatching=!1}return o(t,[{key:"hasTargetChanged",value:function(){if(!this.target)return!0;var t=new a["default"](this.target);return(!this.currentDim||!t.isEqual(this.currentDim))&&(this.currentDim=t,!0)}},{key:"check",value:function(){return this.hasTargetChanged()&&this.dispatcher.call("change",this,this.currentDim),this}},{key:"on",value:function(t,e){return this.dispatcher.on(t,e),this}},{key:"off",value:function(t){return this.dispatcher.on(t,null),this}},{key:"start",value:function(){return this.isWatching||(this.target&&(this.currentDim=new a["default"](this.target)),this.type===t.TYPE_WINDOW?window.addEventListener("resize",this.throttledCheck):this.type===t.TYPE_POLLING&&(this.intervalId=window.setInterval(this.check,this.interval)),this.isWatching=!0),this}},{key:"stop",value:function(){return this.isWatching&&(this.type===t.TYPE_WINDOW?window.removeEventListener("resize",this.throttledCheck):this.type===t.TYPE_POLLING&&this.intervalId&&(window.clearInterval(this.intervalId),this.intervalId=null),this.isWatching=!1),this}},{key:"destroy",value:function(){return this.stop(),this.off("change"),this}}]),t}();l.TYPE_WINDOW="window",l.TYPE_POLLING="polling",e["default"]=l},function(t,e,n){!function(t,n){n(e)}(this,function(t){"use strict";function e(){for(var t,e=0,i=arguments.length,r={};e<i;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new n(r)}function n(t){this._=t}function i(t,e){return t.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}function r(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}function o(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=u,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}var u={value:function(){}};n.prototype=e.prototype={constructor:n,on:function(t,e){var n,u=this._,a=i(t+"",u),f=-1,c=a.length;{if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++f<c;)if(n=(t=a[f]).type)u[n]=o(u[n],t.name,e);else if(null==e)for(n in u)u[n]=o(u[n],t.name,null);return this}for(;++f<c;)if((n=(t=a[f]).type)&&(n=r(u[n],t.name)))return n}},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new n(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),o=0;o<n;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=this._[t],o=0,n=i.length;o<n;++o)i[o].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}},t.dispatch=e,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,e,n){function i(t,e,n){var i=!0,a=!0;if("function"!=typeof t)throw new TypeError(u);return o(n)&&(i="leading"in n?!!n.leading:i,a="trailing"in n?!!n.trailing:a),r(t,e,{leading:i,maxWait:e,trailing:a})}var r=n(7),o=n(8),u="Expected a function";t.exports=i},function(t,e,n){function i(t,e,n){function i(e){var n=w,i=b;return w=b=void 0,j=e,O=t.apply(i,n)}function s(t){return j=t,_=setTimeout(d,e),P?i(t):O}function h(t){var n=t-E,i=t-j,r=e-n;return x?c(r,m-i):r}function l(t){var n=t-E,i=t-j;return void 0===E||n>=e||n<0||x&&i>=m}function d(){var t=o();return l(t)?p(t):void(_=setTimeout(d,h(t)))}function p(t){return _=void 0,k&&w?i(t):(w=b=void 0,O)}function v(){void 0!==_&&clearTimeout(_),j=0,w=E=b=_=void 0}function y(){return void 0===_?O:p(o())}function g(){var t=o(),n=l(t);if(w=arguments,b=this,E=t,n){if(void 0===_)return s(E);if(x)return _=setTimeout(d,e),i(E)}return void 0===_&&(_=setTimeout(d,e)),O}var w,b,m,O,_,E,j=0,P=!1,x=!1,k=!0;if("function"!=typeof t)throw new TypeError(a);return e=u(e)||0,r(n)&&(P=!!n.leading,x="maxWait"in n,m=x?f(u(n.maxWait)||0,e):m,k="trailing"in n?!!n.trailing:k),g.cancel=v,g.flush=y,g}var r=n(8),o=n(9),u=n(12),a="Expected a function",f=Math.max,c=Math.min;t.exports=i},function(t,e){function n(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}t.exports=n},function(t,e,n){var i=n(10),r=function(){return i.Date.now()};t.exports=r},function(t,e,n){var i=n(11),r="object"==typeof self&&self&&self.Object===Object&&self,o=i||r||Function("return this")();t.exports=o},function(t,e){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(e,function(){return this}())},function(t,e,n){function i(t){if("number"==typeof t)return t;if(o(t))return u;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(a,"");var n=c.test(t);return n||s.test(t)?h(t.slice(2),n?2:8):f.test(t)?u:+t}var r=n(8),o=n(13),u=NaN,a=/^\s+|\s+$/g,f=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,s=/^0o[0-7]+$/i,h=parseInt;t.exports=i},function(t,e,n){function i(t){return"symbol"==typeof t||r(t)&&a.call(t)==o}var r=n(14),o="[object Symbol]",u=Object.prototype,a=u.toString;t.exports=i},function(t,e){function n(t){return!!t&&"object"==typeof t}t.exports=n},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),f=n(3),c=i(f),s=n(4),h=i(s),l=n(2),d=function(t){function e(){var t=arguments.length<=0||void 0===arguments[0]?(0,l.isRequired)("box"):arguments[0],n=arguments.length<=1||void 0===arguments[1]?(0,l.isRequired)("container"):arguments[1],i=arguments[2],u=arguments[3];r(this,e);var a=o(this,Object.getPrototypeOf(e).call(this,u)),f=new c["default"](i);return a.fit=function(){return f.fit(t,n)},a}return u(e,t),a(e,[{key:"check",value:function(){if(this.hasTargetChanged()){var t=this.fit();t.changed&&this.dispatcher.call("change",this,t.dimension)}return this}}]),e}(h["default"]);e["default"]=d}])});